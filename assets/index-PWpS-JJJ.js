import{r as M,j as R,o as K}from"./index-Dnv9Ydz9.js";var u=function(){return u=Object.assign||function(s){for(var o,t=1,e=arguments.length;t<e;t++){o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(s[i]=o[i])}return s},u.apply(this,arguments)},U={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},X={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},C={width:"20px",height:"20px",position:"absolute",zIndex:1},Q={top:u(u({},U),{top:"-5px"}),right:u(u({},X),{left:void 0,right:"-5px"}),bottom:u(u({},U),{top:void 0,bottom:"-5px"}),left:u(u({},X),{left:"-5px"}),topRight:u(u({},C),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:u(u({},C),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:u(u({},C),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:u(u({},C),{left:"-10px",top:"-10px",cursor:"nw-resize"})},tt=M.memo(function(s){var o=s.onResizeStart,t=s.direction,e=s.children,i=s.replaceStyles,n=s.className,a=M.useCallback(function(h){o(h,t)},[o,t]),r=M.useCallback(function(h){o(h,t)},[o,t]),p=M.useMemo(function(){return u(u({position:"absolute",userSelect:"none"},Q[t]),i??{})},[i,t]);return R.jsx("div",{className:n||void 0,style:p,onMouseDown:a,onTouchStart:r,children:e})}),et=function(){var s=function(o,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])},s(o,t)};return function(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");s(o,t);function e(){this.constructor=o}o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),m=function(){return m=Object.assign||function(s){for(var o,t=1,e=arguments.length;t<e;t++){o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(s[i]=o[i])}return s},m.apply(this,arguments)},it={width:"auto",height:"auto"},H=function(s,o,t){return Math.max(Math.min(s,t),o)},Y=function(s,o,t){var e=Math.round(s/o);return e*o+t*(e-1)},W=function(s,o){return new RegExp(s,"i").test(o)},L=function(s){return!!(s.touches&&s.touches.length)},st=function(s){return!!((s.clientX||s.clientX===0)&&(s.clientY||s.clientY===0))},G=function(s,o,t){t===void 0&&(t=0);var e=o.reduce(function(n,a,r){return Math.abs(a-s)<Math.abs(o[n]-s)?r:n},0),i=Math.abs(o[e]-s);return t===0||i<t?o[e]:s},k=function(s){return s=s.toString(),s==="auto"||s.endsWith("px")||s.endsWith("%")||s.endsWith("vh")||s.endsWith("vw")||s.endsWith("vmax")||s.endsWith("vmin")?s:"".concat(s,"px")},j=function(s,o,t,e){if(s&&typeof s=="string"){if(s.endsWith("px"))return Number(s.replace("px",""));if(s.endsWith("%")){var i=Number(s.replace("%",""))/100;return o*i}if(s.endsWith("vw")){var i=Number(s.replace("vw",""))/100;return t*i}if(s.endsWith("vh")){var i=Number(s.replace("vh",""))/100;return e*i}}return s},rt=function(s,o,t,e,i,n,a){return e=j(e,s.width,o,t),i=j(i,s.height,o,t),n=j(n,s.width,o,t),a=j(a,s.height,o,t),{maxWidth:typeof e>"u"?void 0:Number(e),maxHeight:typeof i>"u"?void 0:Number(i),minWidth:typeof n>"u"?void 0:Number(n),minHeight:typeof a>"u"?void 0:Number(a)}},ot=function(s){return Array.isArray(s)?s:[s,s]},nt=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],I="__resizable_base__",at=function(s){et(o,s);function o(t){var e,i,n,a,r=s.call(this,t)||this;return r.ratio=1,r.resizable=null,r.parentLeft=0,r.parentTop=0,r.resizableLeft=0,r.resizableRight=0,r.resizableTop=0,r.resizableBottom=0,r.targetLeft=0,r.targetTop=0,r.delta={width:0,height:0},r.appendBase=function(){if(!r.resizable||!r.window)return null;var p=r.parentNode;if(!p)return null;var h=r.window.document.createElement("div");return h.style.width="100%",h.style.height="100%",h.style.position="absolute",h.style.transform="scale(0, 0)",h.style.left="0",h.style.flex="0 0 100%",h.classList?h.classList.add(I):h.className+=I,p.appendChild(h),h},r.removeBase=function(p){var h=r.parentNode;h&&h.removeChild(p)},r.state={isResizing:!1,width:(i=(e=r.propsSize)===null||e===void 0?void 0:e.width)!==null&&i!==void 0?i:"auto",height:(a=(n=r.propsSize)===null||n===void 0?void 0:n.height)!==null&&a!==void 0?a:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},r.onResizeStart=r.onResizeStart.bind(r),r.onMouseMove=r.onMouseMove.bind(r),r.onMouseUp=r.onMouseUp.bind(r),r}return Object.defineProperty(o.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||it},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){var t=0,e=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,n=this.resizable.offsetHeight,a=this.resizable.style.position;a!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:i,e=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:n,this.resizable.style.position=a}return{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sizeStyle",{get:function(){var t=this,e=this.props.size,i=function(r){var p;if(typeof t.state[r]>"u"||t.state[r]==="auto")return"auto";if(t.propsSize&&t.propsSize[r]&&(!((p=t.propsSize[r])===null||p===void 0)&&p.toString().endsWith("%"))){if(t.state[r].toString().endsWith("%"))return t.state[r].toString();var h=t.getParentSize(),l=Number(t.state[r].toString().replace("px","")),d=l/h[r]*100;return"".concat(d,"%")}return k(t.state[r])},n=e&&typeof e.width<"u"&&!this.state.isResizing?k(e.width):i("width"),a=e&&typeof e.height<"u"&&!this.state.isResizing?k(e.height):i("height");return{width:n,height:a}},enumerable:!1,configurable:!0}),o.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var e=!1,i=this.parentNode.style.flexWrap;i!=="wrap"&&(e=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var n={width:t.offsetWidth,height:t.offsetHeight};return e&&(this.parentNode.style.flexWrap=i),this.removeBase(t),n},o.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},o.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},o.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},o.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},o.prototype.createSizeForCssProperty=function(t,e){var i=this.propsSize&&this.propsSize[e];return this.state[e]==="auto"&&this.state.original[e]===t&&(typeof i>"u"||i==="auto")?"auto":t},o.prototype.calculateNewMaxFromBoundary=function(t,e){var i=this.props.boundsByDirection,n=this.state.direction,a=i&&W("left",n),r=i&&W("top",n),p,h;if(this.props.bounds==="parent"){var l=this.parentNode;l&&(p=a?this.resizableRight-this.parentLeft:l.offsetWidth+(this.parentLeft-this.resizableLeft),h=r?this.resizableBottom-this.parentTop:l.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(p=a?this.resizableRight:this.window.innerWidth-this.resizableLeft,h=r?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(p=a?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),h=r?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return p&&Number.isFinite(p)&&(t=t&&t<p?t:p),h&&Number.isFinite(h)&&(e=e&&e<h?e:h),{maxWidth:t,maxHeight:e}},o.prototype.calculateNewSizeFromDirection=function(t,e){var i=this.props.scale||1,n=ot(this.props.resizeRatio||1),a=n[0],r=n[1],p=this.state,h=p.direction,l=p.original,d=this.props,z=d.lockAspectRatio,x=d.lockAspectRatioExtraHeight,w=d.lockAspectRatioExtraWidth,f=l.width,v=l.height,b=x||0,y=w||0;return W("right",h)&&(f=l.width+(t-l.x)*a/i,z&&(v=(f-y)/this.ratio+b)),W("left",h)&&(f=l.width-(t-l.x)*a/i,z&&(v=(f-y)/this.ratio+b)),W("bottom",h)&&(v=l.height+(e-l.y)*r/i,z&&(f=(v-b)*this.ratio+y)),W("top",h)&&(v=l.height-(e-l.y)*r/i,z&&(f=(v-b)*this.ratio+y)),{newWidth:f,newHeight:v}},o.prototype.calculateNewSizeFromAspectRatio=function(t,e,i,n){var a=this.props,r=a.lockAspectRatio,p=a.lockAspectRatioExtraHeight,h=a.lockAspectRatioExtraWidth,l=typeof n.width>"u"?10:n.width,d=typeof i.width>"u"||i.width<0?t:i.width,z=typeof n.height>"u"?10:n.height,x=typeof i.height>"u"||i.height<0?e:i.height,w=p||0,f=h||0;if(r){var v=(z-w)*this.ratio+f,b=(x-w)*this.ratio+f,y=(l-f)/this.ratio+w,c=(d-f)/this.ratio+w,g=Math.max(l,v),E=Math.min(d,b),B=Math.max(z,y),_=Math.min(x,c);t=H(t,g,E),e=H(e,B,_)}else t=H(t,l,d),e=H(e,z,x);return{newWidth:t,newHeight:e}},o.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var e=this.parentNode;if(e){var i=e.getBoundingClientRect();this.parentLeft=i.left*t,this.parentTop=i.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left*t,this.targetTop=n.top*t}if(this.resizable){var a=this.resizable.getBoundingClientRect(),r=a.left,p=a.top,h=a.right,l=a.bottom;this.resizableLeft=r*t,this.resizableRight=h*t,this.resizableTop=p*t,this.resizableBottom=l*t}},o.prototype.onResizeStart=function(t,e){if(!(!this.resizable||!this.window)){var i=0,n=0;if(t.nativeEvent&&st(t.nativeEvent)?(i=t.nativeEvent.clientX,n=t.nativeEvent.clientY):t.nativeEvent&&L(t.nativeEvent)&&(i=t.nativeEvent.touches[0].clientX,n=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var a=this.props.onResizeStart(t,e,this.resizable);if(a===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var r,p=this.window.getComputedStyle(this.resizable);if(p.flexBasis!=="auto"){var h=this.parentNode;if(h){var l=this.window.getComputedStyle(h).flexDirection;this.flexDir=l.startsWith("row")?"row":"column",r=p.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var d={original:{x:i,y:n,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:m(m({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:e,flexBasis:r};this.setState(d)}},o.prototype.onMouseMove=function(t){var e=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&L(t))try{t.preventDefault(),t.stopPropagation()}catch{}var i=this.props,n=i.maxWidth,a=i.maxHeight,r=i.minWidth,p=i.minHeight,h=L(t)?t.touches[0].clientX:t.clientX,l=L(t)?t.touches[0].clientY:t.clientY,d=this.state,z=d.direction,x=d.original,w=d.width,f=d.height,v=this.getParentSize(),b=rt(v,this.window.innerWidth,this.window.innerHeight,n,a,r,p);n=b.maxWidth,a=b.maxHeight,r=b.minWidth,p=b.minHeight;var y=this.calculateNewSizeFromDirection(h,l),c=y.newHeight,g=y.newWidth,E=this.calculateNewMaxFromBoundary(n,a);this.props.snap&&this.props.snap.x&&(g=G(g,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(c=G(c,this.props.snap.y,this.props.snapGap));var B=this.calculateNewSizeFromAspectRatio(g,c,{width:E.maxWidth,height:E.maxHeight},{width:r,height:p});if(g=B.newWidth,c=B.newHeight,this.props.grid){var _=Y(g,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),O=Y(c,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),N=this.props.snapGap||0,V=N===0||Math.abs(_-g)<=N?_:g,Z=N===0||Math.abs(O-c)<=N?O:c;g=V,c=Z}var T={width:g-x.width,height:c-x.height};if(this.delta=T,w&&typeof w=="string"){if(w.endsWith("%")){var A=g/v.width*100;g="".concat(A,"%")}else if(w.endsWith("vw")){var D=g/this.window.innerWidth*100;g="".concat(D,"vw")}else if(w.endsWith("vh")){var P=g/this.window.innerHeight*100;g="".concat(P,"vh")}}if(f&&typeof f=="string"){if(f.endsWith("%")){var A=c/v.height*100;c="".concat(A,"%")}else if(f.endsWith("vw")){var D=c/this.window.innerWidth*100;c="".concat(D,"vw")}else if(f.endsWith("vh")){var P=c/this.window.innerHeight*100;c="".concat(P,"vh")}}var S={width:this.createSizeForCssProperty(g,"width"),height:this.createSizeForCssProperty(c,"height")};this.flexDir==="row"?S.flexBasis=S.width:this.flexDir==="column"&&(S.flexBasis=S.height);var $=this.state.width!==S.width,q=this.state.height!==S.height,J=this.state.flexBasis!==S.flexBasis,F=$||q||J;F&&K.flushSync(function(){e.setState(S)}),this.props.onResize&&F&&this.props.onResize(t,z,this.resizable,T)}},o.prototype.onMouseUp=function(t){var e,i,n=this.state,a=n.isResizing,r=n.direction;n.original,!(!a||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,r,this.resizable,this.delta),this.props.size&&this.setState({width:(e=this.props.size.width)!==null&&e!==void 0?e:"auto",height:(i=this.props.size.height)!==null&&i!==void 0?i:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:m(m({},this.state.backgroundStyle),{cursor:"auto"})}))},o.prototype.updateSize=function(t){var e,i;this.setState({width:(e=t.width)!==null&&e!==void 0?e:"auto",height:(i=t.height)!==null&&i!==void 0?i:"auto"})},o.prototype.renderResizer=function(){var t=this,e=this.props,i=e.enable,n=e.handleStyles,a=e.handleClasses,r=e.handleWrapperStyle,p=e.handleWrapperClass,h=e.handleComponent;if(!i)return null;var l=Object.keys(i).map(function(d){return i[d]!==!1?R.jsx(tt,{direction:d,onResizeStart:t.onResizeStart,replaceStyles:n&&n[d],className:a&&a[d],children:h&&h[d]?h[d]:null},d):null});return R.jsx("div",{className:p,style:r,children:l})},o.prototype.render=function(){var t=this,e=Object.keys(this.props).reduce(function(a,r){return nt.indexOf(r)!==-1||(a[r]=t.props[r]),a},{}),i=m(m(m({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var n=this.props.as||"div";return R.jsxs(n,m({style:i,className:this.props.className},e,{ref:function(a){a&&(t.resizable=a)},children:[this.state.isResizing&&R.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},o.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},o}(M.PureComponent);function lt(){const[s,o]=M.useState({handler:null,clientWidth:null,clientHeight:null,offsetWidth:null,offsetHeight:null});function t(e,i,n,a){o({handler:i,clientWidth:n.clientWidth,clientHeight:n.clientHeight,offsetWidth:n.offsetWidth,offsetHeight:n.offsetHeight})}return R.jsx(at,{style:{backgroundColor:"red",color:"#fff",border:"10px solid #000",lineHeight:"30px"},defaultSize:{width:320,height:200},enable:{top:!1,left:!1,topRight:!1,bottomLeft:!1,topLeft:!1,right:!0,bottom:!0,bottomRight:!0},onResize:t,children:Object.keys(s).map(e=>R.jsxs("div",{children:[e,": ",s[e]]},e))})}export{lt as default};
