import{j as s,r as h,_ as f}from"./index-BEVwWGVc.js";import{C as S,b as C,c as _,D as b,d as g,M as w}from"./core.esm-BXNEaAg-.js";import{u as j,S as x,r as u,a as I}from"./sortable.esm-BWerqriO.js";import{B as E}from"./index-CLoI_6Ov.js";import{T as M}from"./index-xvELeJxA.js";import"./IconClose-DuoACxKe.js";import"./IconTickCircle-Drcd04tM.js";import"./IconAlertTriangle-D_dmra6z.js";const N="_wrapper_18s0x_1",D="_container_18s0x_5",y={wrapper:N,container:D};function T(n){const{listeners:d,setNodeRef:a,transform:e,transition:c}=j({id:n.id}),t={transition:c,transform:S.Transform.toString(e)};return s.jsxs("div",{className:y.container,style:t,ref:a,children:[s.jsx("h1",{...d,children:n.id}),n.children]})}const R="_sortableItem_y1u8g_1",B={sortableItem:R};function L(n){const{listeners:d,setNodeRef:a,transform:e,transition:c}=j({id:n.id,data:{pId:n.pId}}),t={transition:c,transform:S.Transform.toString(e)};return s.jsx("div",{...d,onClick:()=>M.info(`你点击了${n.id}`),className:B.sortableItem,style:t,ref:a,children:n.id})}function H(){const[n,d]=h.useState([{id:"container-1",list:[{id:"list1-1",pId:"container-1"},{id:"list1-2",pId:"container-1"},{id:"list1-3",pId:"container-1"}]},{id:"container-2",list:[{id:"list2-1",pId:"container-2"},{id:"list2-2",pId:"container-2"},{id:"list2-3",pId:"container-2"}]},{id:"container-3",list:[{id:"list3-1",pId:"container-3"},{id:"list3-2",pId:"container-3"},{id:"list3-3",pId:"container-3"}]}]),a=C(_(w,{activationConstraint:{distance:5}}));function e(t,i){return t.findIndex(o=>o.id===i)}function c({active:t,over:i}){if(!(f.isEmpty(t)||f.isEmpty(i))){if(t.id.includes("container")&&i.id.includes("container")){const r=e(n,t.id),o=e(n,i.id);r!==o&&d(l=>I(l,r,o));return}if(t.data.current.pId===i.data.current.pId){const r=n.findIndex(m=>m.id===t.data.current.pId),o=e(n[r].list,t.id),l=e(n[r].list,i.id);o!==l&&d(m=>{const p=[...m];return p[r].list=I(p[r].list,o,l),p})}}}return s.jsxs(b,{sensors:a,collisionDetection:g,onDragEnd:c,children:[s.jsx(E,{type:"info",fullMode:!1,description:"基础版：支持整列排序，支持同组内拖拽"}),s.jsx("br",{}),s.jsx("div",{className:y.wrapper,children:s.jsx(x,{items:n.map(t=>t.id),strategy:u,children:n.map(t=>s.jsx(T,{id:t.id,children:s.jsx(x,{items:t.list.map(i=>i.id),strategy:u,children:t.list.map(i=>s.jsx(L,{id:i.id,pId:i.pId},i.id))})},t.id))})})]})}export{H as default};
